"use strict";var commons=require("@permian/commons"),fs=commons.files.fsExtra;function StorageLimitSetter(t,i){var r,e=this;i=commons.lang.assignRecursive({storageLimit:{cfgFile:"/etc/containers/storage.conf"}},i),e.apply=function(){var t=e;return i.limit&&(t=fs.readFile(i.storageLimit.cfgFile).then(function(t){r=t.toString();var e=t.toString().split("\n").reduce(function(t,e){return e.trim().startsWith("size")?t:t+e+"\n"},"");return e+='\nsize="'+i.limit+'"',fs.writeFile(i.storageLimit.cfgFile,e)}).then(function(){return e})),t},e.revert=function(){return fs.writeFile(i.storageLimit.cfgFile,r).then(t)}}module.exports=Object.freeze({createInstance:function(t,e){return new StorageLimitSetter(t,e)}});